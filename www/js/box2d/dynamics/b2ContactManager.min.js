var b2ContactManager=Class.create();Object.extend(b2ContactManager.prototype,b2PairCallback.prototype),Object.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact,this.m_world=null,this.m_destroyImmediate=!1},PairAdded:function(t,n){var e=t,o=n,l=e.m_body,m=o.m_body;if(l.IsStatic()&&m.IsStatic())return this.m_nullContact;if(e.m_body==o.m_body)return this.m_nullContact;if(m.IsConnected(l))return this.m_nullContact;if(null!=this.m_world.m_filter&&0==this.m_world.m_filter.ShouldCollide(e,o))return this.m_nullContact;if(0==m.m_invMass){var a=e;e=o,o=a;var _=l;l=m,m=_}var r=b2Contact.Create(e,o,this.m_world.m_blockAllocator);return null==r?this.m_nullContact:(r.m_prev=null,r.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=r),this.m_world.m_contactList=r,this.m_world.m_contactCount++,r)},PairRemoved:function(t,n,e){if(null!=e){var o=e;o!=this.m_nullContact&&(1==this.m_destroyImmediate?(this.DestroyContact(o),o=null):o.m_flags|=b2Contact.e_destroyFlag)}},DestroyContact:function(t){if(t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.GetManifoldCount()>0){var n=t.m_shape1.m_body,e=t.m_shape2.m_body,o=t.m_node1,l=t.m_node2;n.WakeUp(),e.WakeUp(),o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),o==n.m_contactList&&(n.m_contactList=o.next),o.prev=null,o.next=null,l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),l==e.m_contactList&&(e.m_contactList=l.next),l.prev=null,l.next=null}b2Contact.Destroy(t,this.m_world.m_blockAllocator),--this.m_world.m_contactCount},CleanContactList:function(){for(var t=this.m_world.m_contactList;null!=t;){var n=t;t=t.m_next,n.m_flags&b2Contact.e_destroyFlag&&(this.DestroyContact(n),n=null)}},Collide:function(){for(var t,n,e,o,l=this.m_world.m_contactList;null!=l;l=l.m_next)if(!l.m_shape1.m_body.IsSleeping()||!l.m_shape2.m_body.IsSleeping()){var m=l.GetManifoldCount();l.Evaluate();var a=l.GetManifoldCount();0==m&&a>0?(t=l.m_shape1.m_body,n=l.m_shape2.m_body,e=l.m_node1,o=l.m_node2,e.contact=l,e.other=n,e.prev=null,e.next=t.m_contactList,null!=e.next&&(e.next.prev=l.m_node1),t.m_contactList=l.m_node1,o.contact=l,o.other=t,o.prev=null,o.next=n.m_contactList,null!=o.next&&(o.next.prev=o),n.m_contactList=o):m>0&&0==a&&(t=l.m_shape1.m_body,n=l.m_shape2.m_body,e=l.m_node1,o=l.m_node2,e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e==t.m_contactList&&(t.m_contactList=e.next),e.prev=null,e.next=null,o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),o==n.m_contactList&&(n.m_contactList=o.next),o.prev=null,o.next=null)}},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});