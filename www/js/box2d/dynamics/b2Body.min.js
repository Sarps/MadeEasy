var b2Body=Class.create();b2Body.prototype={SetOriginPosition:function(t,i){if(!this.IsFrozen()){this.m_rotation=i,this.m_R.Set(this.m_rotation),this.m_position=b2Math.AddVV(t,b2Math.b2MulMV(this.m_R,this.m_center)),this.m_position0.SetV(this.m_position),this.m_rotation0=this.m_rotation;for(var s=this.m_shapeList;null!=s;s=s.m_next)s.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,this.m_center))},SetCenterPosition:function(t,i){if(!this.IsFrozen()){this.m_rotation=i,this.m_R.Set(this.m_rotation),this.m_position.SetV(t),this.m_position0.SetV(this.m_position),this.m_rotation0=this.m_rotation;for(var s=this.m_shapeList;null!=s;s=s.m_next)s.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetCenterPosition:function(){return this.m_position},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},SetLinearVelocity:function(t){this.m_linearVelocity.SetV(t)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(t){this.m_angularVelocity=t},GetAngularVelocity:function(){return this.m_angularVelocity},ApplyForce:function(t,i){0==this.IsSleeping()&&(this.m_force.Add(t),this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(i,this.m_position),t))},ApplyTorque:function(t){0==this.IsSleeping()&&(this.m_torque+=t)},ApplyImpulse:function(t,i){0==this.IsSleeping()&&(this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,t)),this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(i,this.m_position),t))},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(t){return b2Math.AddVV(this.m_position,b2Math.b2MulMV(this.m_R,t))},GetWorldVector:function(t){return b2Math.b2MulMV(this.m_R,t)},GetLocalPoint:function(t){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(t,this.m_position))},GetLocalVector:function(t){return b2Math.b2MulTMV(this.m_R,t)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(t){t?this.m_flags|=b2Body.e_allowSleepFlag:(this.m_flags&=~b2Body.e_allowSleepFlag,this.WakeUp())},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag,this.m_sleepTime=0},GetShapeList:function(){return this.m_shapeList},GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(t,i){this.sMat0=new b2Mat22,this.m_position=new b2Vec2,this.m_R=new b2Mat22(0),this.m_position0=new b2Vec2;var s,n,e=0;this.m_flags=0,this.m_position.SetV(t.position),this.m_rotation=t.rotation,this.m_R.Set(this.m_rotation),this.m_position0.SetV(this.m_position),this.m_rotation0=this.m_rotation,this.m_world=i,this.m_linearDamping=b2Math.b2Clamp(1-t.linearDamping,0,1),this.m_angularDamping=b2Math.b2Clamp(1-t.angularDamping,0,1),this.m_force=new b2Vec2(0,0),this.m_torque=0,this.m_mass=0;var o=new Array(b2Settings.b2_maxShapesPerBody);for(e=0;e<b2Settings.b2_maxShapesPerBody;e++)o[e]=new b2MassData;for(this.m_shapeCount=0,this.m_center=new b2Vec2(0,0),e=0;e<b2Settings.b2_maxShapesPerBody&&(s=t.shapes[e],null!=s);++e)n=o[e],s.ComputeMass(n),this.m_mass+=n.mass,this.m_center.x+=n.mass*(s.localPosition.x+n.center.x),this.m_center.y+=n.mass*(s.localPosition.y+n.center.y),++this.m_shapeCount;for(this.m_mass>0?(this.m_center.Multiply(1/this.m_mass),this.m_position.Add(b2Math.b2MulMV(this.m_R,this.m_center))):this.m_flags|=b2Body.e_staticFlag,this.m_I=0,e=0;e<this.m_shapeCount;++e){s=t.shapes[e],n=o[e],this.m_I+=n.I;var a=b2Math.SubtractVV(b2Math.AddVV(s.localPosition,n.center),this.m_center);this.m_I+=n.mass*b2Math.b2Dot(a,a)}for(this.m_invMass=this.m_mass>0?1/this.m_mass:0,this.m_I>0&&0==t.preventRotation?this.m_invI=1/this.m_I:(this.m_I=0,this.m_invI=0),this.m_linearVelocity=b2Math.AddVV(t.linearVelocity,b2Math.b2CrossFV(t.angularVelocity,this.m_center)),this.m_angularVelocity=t.angularVelocity,this.m_jointList=null,this.m_contactList=null,this.m_prev=null,this.m_next=null,this.m_shapeList=null,e=0;e<this.m_shapeCount;++e){s=t.shapes[e];var m=b2Shape.Create(s,this,this.m_center);m.m_next=this.m_shapeList,this.m_shapeList=m}this.m_sleepTime=0,t.allowSleep&&(this.m_flags|=b2Body.e_allowSleepFlag),t.isSleeping&&(this.m_flags|=b2Body.e_sleepFlag),(this.m_flags&b2Body.e_sleepFlag||0==this.m_invMass)&&(this.m_linearVelocity.Set(0,0),this.m_angularVelocity=0),this.m_userData=t.userData},Destroy:function(){for(var t=this.m_shapeList;t;){var i=t;t=t.m_next,b2Shape.Destroy(i)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var t=this.m_shapeList;null!=t;t=t.m_next)t.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)},QuickSyncShapes:function(){for(var t=this.m_shapeList;null!=t;t=t.m_next)t.QuickSync(this.m_position,this.m_R)},IsConnected:function(t){for(var i=this.m_jointList;null!=i;i=i.next)if(i.other==t)return 0==i.joint.m_collideConnected;return!1},Freeze:function(){this.m_flags|=b2Body.e_frozenFlag,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0;for(var t=this.m_shapeList;null!=t;t=t.m_next)t.DestroyProxy()},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,m_angularDamping:null,m_sleepTime:null,m_userData:null},b2Body.e_staticFlag=1,b2Body.e_frozenFlag=2,b2Body.e_islandFlag=4,b2Body.e_sleepFlag=8,b2Body.e_allowSleepFlag=16,b2Body.e_destroyFlag=32;